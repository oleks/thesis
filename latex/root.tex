\documentclass[a4paper,oneside,tikz]{book}

\PassOptionsToPackage{backref=page}{hyperref} % backrefs in references

\usepackage[fancy]{template}
\usepackage{survival-pack}

\usepackage{tikz}
\usetikzlibrary{calc, chains, decorations.pathmorphing}

\usepackage{enumitem} % fixed-width description items

\usepackage{stmaryrd} % llbracket, rrbracket

\usepackage{tensor} % left sub/sup scripts

\usepackage{makeidx} % index
\makeindex % initialize index creation

\usetikzlibrary{graphs,graphdrawing,arrows.meta} % reingold-tilford
\usegdlibrary{trees} % reingold-tilford

\setcounter{secnumdepth}{3} % number subsubsections

%\usepackage[symbol]{footmisc} % use symbols for footnote marks
\renewcommand{\thefootnote}{(\arabic{footnote})}

\backrefparscanfalse % don't automatically add backrefs to references

% custom layout for backrefs in references
\renewcommand*{\backrefalt}[4]{%
  \ifcase #1 %
    No citations.%
  \or
    Cited on page #2.%
  \else
    Cited on pages #2.%
  \fi
}

\setup{%
  subject={Master's Thesis},%
  assignment={Programming Languages for Feasible Programs},%
%  assignment={Implicit Guarantees of the Computational Complexity of Feasible Programs},%
  date={February 11, 2015.}%
}
\setupLocation[short=DIKU]{Datalogisk institut, Copenhagen University}
\setupAuthor[addendum={\email{oleks@oleks.info}}]{Oleksandr Shturmov}

\newtheorem{notation}{Notation}
\newtheorem{notational-corollary}{Notational Corollary}

\theoremstyle{theorem}
\newtheorem{textaxiom}{Axiom}
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}
\newtheorem{conjecture}{Conjecture}
\newtheorem{hypothesis}{Hypothesis}

\numberwithin{textaxiom}{section}
\numberwithin{theorem}{section}
\numberwithin{corollary}{section}
\numberwithin{conjecture}{section}
\numberwithin{lemma}{section}
\numberwithin{hypothesis}{section}

\theoremstyle{definition}
\newtheorem{notion}{Notion}
\newtheorem{primitive-notion}{Primitive Notion}
\newtheorem{example}{Example}
\newtheorem{definition}{Definition}
\newtheorem{alias}{Alias}
\newtheorem{specification}{Specification}

\numberwithin{primitive-notion}{section}
\numberwithin{notion}{section}
\numberwithin{example}{section}
\numberwithin{definition}{section}
\numberwithin{alias}{section}
\numberwithin{specification}{section}
\numberwithin{notation}{section}

\theoremstyle{remark}
\newtheorem{remark}{Remark}
\numberwithin{remark}{section}

\DeclareDocumentCommand{\ruleref}{m}{%
  \ensuremath{\text{\textsc{#1}}}%
}

\DeclareDocumentCommand{\judgement}{O{}mm}{%
  \frac{\displaystyle #2}{\displaystyle #3}%
  \ifthenelse{\equal{#1}{}}{}{\;\ruleref{#1}}%
}

\DeclareDocumentCommand{\axiom}{O{}m}{%
  \judgement[#1]{}{#2}
}

\DeclareDocumentCommand{\sequent}{O{}mm}{%
  \ifthenelse{\equal{#1}{}}{}{\text{\textsc{#1:}}}%
  \frac{\displaystyle #2}{\displaystyle #3}%
}

\DeclareDocumentCommand{\symb}{m}{%
  \ensuremath{\mathtt{#1}}%
}

\def\ch{\textsection}
\def\chs{\ch\ch}

\def\qstart{\ensuremath{q_{\text{start}}}}
\def\qhalt{\ensuremath{q_{\text{halt}}}}
\def\blank{\ensuremath{\text{\textvisiblespace}}}
\def\goleft{\symb{L}}
\def\goright{\symb{R}}

\DeclareDocumentCommand{\bib}{mmm}{%
  \bibitem[#1]{#2}#3
%\hfill\newline\vspace{-0.18in}
%
%  #3

  \backrefprint
}

\DeclareDocumentCommand{\bibremark}{m}{%
  \vspace{0.05in}\\
  \emph{#1}
}

\DeclareDocumentCommand{\TIME}{}{\ensuremath{\mathtt{TIME}}}
\DeclareDocumentCommand{\FPTIME}{}{\ensuremath{\mathcal{F}\mathtt{PTIME}}}
\DeclareDocumentCommand{\NSIFPTIME}{}{\ensuremath{\mathcal{F}_{\leq}\mathtt{PTIME}}}
\DeclareDocumentCommand{\PTIME}{}{\ensuremath{\mathtt{PTIME}}}
\DeclareDocumentCommand{\NPTIME}{}{\ensuremath{\mathtt{NPTIME}}}

\DeclareDocumentCommand{\goesto}{}{\hookrightarrow}

\DeclareDocumentCommand{\semic}{}{\ensuremath{\mathrel{};\mathrel{}}}

\DeclareDocumentCommand{\algebra}{mm}{\ensuremath{\seq{#1\mathrel{};\mathrel{}#2}}}

\DeclareDocumentCommand{\todo}{m}{{\bfseries\color{red}#1}}

\DeclareDocumentCommand{\bigOh}{m}{{\ensuremath{\mathcal{O}\p{#1}}}}

\begin{document}

%\maketitle
%\thispagestyle{first} % no fancy header on first page (just a fancy footer).

\setcounter{chapter}{-1}

\input{introduction/root}

\input{background/root}

\input{fptime/root}

\input{subpolynomialism/root}

%\input{appendix/root}

\input{references}

\printindex

\end{document}
